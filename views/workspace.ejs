<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=3, initial-scale=1.0">
    <title>workspace</title>
    <link rel="stylesheet" href="/css/workspace.css">
</head>
<style>
</style>
<body>
    <div id="back"></div>
    <div id="left" class="left">
        <p id="project_name">Projex</p>
        <button class="features" id="addmember">Add Member</button>
        <button class="features" id="task_management"><img class="logo_but" src="./workspace_img/exam.png">Task Management</button>
        <button class="features" id="file_share"><img class="logo_but" src="./workspace_img/folder.png">File Sharing</button>
        <button class="features" id="communication"><img class="logo_but" src="./workspace_img/discussion.png">Communication</button>
        <button class="features" id="project_analysis"><img class="logo_but" src="./workspace_img/data-analytics.png">Project Analysis</button>
    </div>

    <div id="taskdiv_id" class="taskdiv">
        <button id="membertask">members</button>
        <div id="container_task"></div>
    </div>
    <div id="collection_member_task"></div>

    <div id="add_mem">
        <input type="email" id="email" placeholder="Email of member">
        <img src="./workspace_img/mail.png" alt="" id="email_img">
        <input type="text" id="role" placeholder="Role : ex. Frontend Developer">
        <img src="./workspace_img/employee.png" alt="" id="role_img">
        <button id="invite">Invite</button>
        <img src="./workspace_img/close.png" alt="" id="close">

        <hr id="tophr">
        <p id="user_label">User</p>
        <p id="role_label">Role</p>
        <hr id="bottomhr">

        <div id="mem_owner">
            <p id="owner_name_add_mem"> <%= user.name %> </p>
            <p id="owner_email_add_mem"><%= user.username %></p>
            <p id="owner_role_add_mem"> Creator </p>
        </div>
        <div class="container" id="container"></div>
    </div>


    <script>
        let back=document.getElementById('back')
        let close=document.getElementById('close')
        let invite=document.getElementById('invite')
        let add_mem=document.getElementById('add_mem')
        let addmember=document.getElementById('addmember')
        let task_management=document.getElementById('task_management')

        let members=document.getElementById('membertask')
        let taskdiv_id=document.getElementById('taskdiv_id')
        let collect=document.getElementById('collection_member_task')

        window.onload=function()
        {
            add_mem.style.display="none"
            taskdiv_id.style.display="none"
            collect.style.display="none"
        }

        addmember.addEventListener("click", function()
        {
            add_mem.style.display="inline"
            back.style.background="rgba(66, 66, 139, 0.307)"
            back.style.zIndex=1
        })

        close.addEventListener("click", function()
        {
            add_mem.style.display="none"
            back.style.background="none"
            back.style.zIndex=0
        })
        let i=1

        invite.addEventListener("click", 
        function()
        {
            if(i>=5)
            {
                alert("you cannot add more members")
            }
            else
            {
                const mem_new=document.createElement("div")
                mem_new.classList.add("mem_new")
                container.appendChild(mem_new)

                const mem_new_name=document.createElement('p')
                mem_new_name.classList.add('mem_new_name')
                mem_new.appendChild(mem_new_name)
                mem_new_name.innerHTML="Alexa Grace"

                const mem_new_email=document.createElement('p')
                mem_new_email.classList.add('mem_new_email')
                mem_new.appendChild(mem_new_email)
                let mem_new_mailadress=document.getElementById('email').value
                mem_new_email.innerHTML=mem_new_mailadress

                const mem_new_role_div=document.createElement('div')
                mem_new_role_div.classList.add('mem_new_role_div')
                mem_new.appendChild(mem_new_role_div)

                const mem_new_role=document.createElement('p')
                mem_new_role.classList.add('mem_new_role')
                mem_new_role_div.appendChild(mem_new_role)
                let mem_new_rolevalue=document.getElementById('role').value
                mem_new_role.innerHTML=mem_new_rolevalue

                const mem_task=document.createElement('div')
                mem_task.classList.add('mem_task')
                mem_task.innerHTML=mem_new_mailadress
                collection_member_task.appendChild(mem_task)

                mem_task.addEventListener("click",
                function()
                {
                    container_task.appendChild(mem_task)
                })
            }
            i++
        })

        task_management.addEventListener("click", 
        function()
        {
            taskdiv_id.style.display="flex"
        })

        members.addEventListener("click", 
        function()
        {
            collect.style.display="flex"
        })

    </script>
</body>
</html>